# 
# ðŸ”´ =================================================================
# ðŸ”´ STRATEGIC SECTION (The "Constitution")
# ðŸ”´ =================================================================
# This section is filled by @meta-architect and approved by @project-coordinator.
# It defines the "What", "How", and "Who" of the project.
# It MUST be read by all agents before any work.
#

[project_metadata]
# (To be filled by @meta-architect)
name: "Project Name (e.g., Gamified Brand Experience)"
objective: "The high-level user objective (e.g., 'To create an interactive brand experience that sells products, prioritizing performance and animation.')"

[stack]
# (Proposed by @meta-architect based on objective)
# (Example below is for a SvelteKit Headless project)
language: "TypeScript"
framework: "SvelteKit"
ui_library: "Svelte + Tailwind CSS (native)"
backend_architecture: "Headless (Shopify Adapter), SvelteKit Server Logic"

[architecture_principles]
# (Proposed by @meta-architect, specific to the stack)
# (Example below is for a SvelteKit Headless project)
# - "Principle 1: State logic MUST be decoupled from UI (Svelte Stores)."
# - "Principle 2: Prioritize SSG (Static Site Generation) for the main landing page."
# - "Principle 3: All API communication MUST be abstracted into `src/lib/services`."

[methodology]
# (Proposed by @meta-architect, read by Orchestrator Commands)
workflow: "TDD" # Options: TDD, BDD, RAD (Rapid Application Development), Prototype-First
vcs_provider: "GitHub" # Options: GitHub, GitLab, Bitbucket
validation_method: "Playwright" # Options: Playwright, API-Test (e.g., curl/scripts), Manual-Only

[core_team]
# (Proposed by @meta-architect, based on Hybrid Model "Core + Specialists")
# These are the default roles for 90% of tasks (`explore-plan`).
# The system MUST validate these agents exist at project start.
- "domain-logic-architect"
- "presentation-layer-architect"
- "ui-component-architect"
- "test-strategy-planner"
- "security-architect"
- "acceptance-validator"
- "implementation-test-engineer"

# 
# ðŸ”µ =================================================================
# ðŸ”µ TECHNICAL CONTEXT SECTION
# ðŸ”µ =================================================================
# This section defines the project-specific implementation details.
# Filled by @meta-architect, read by implementation agents.
#

## Project Architecture Layers
# (Proposed by @meta-architect, describes the folder structure)
# (Example below is for a SvelteKit project)
# src/
#   lib/
#     components/         # Reusable Svelte UI components
#     features/           # Core business logic (e.g., cart)
#     services/           # API adapters (e.g., Shopify)
#   routes/               # SvelteKit file-based routing

## Path Aliases
# (Proposed by @meta-architect, if applicable)
# (Example below is for a SvelteKit project)
# "$lib/*"              â†’ ./src/lib/*
# "$components/*"       â†’ ./src/lib/components/*

## Environment Variables
# (Proposed by @meta-architect)
# (Example)
# - `PUBLIC_SHOPIFY_STOREFRONT_API_TOKEN`
# - `PUBLIC_SHOPIFY_STORE_DOMAIN`

## Development Commands
# (Proposed by @meta-architect)

### Running the Application
# (Example)
# yarn dev

### Testing
# (Example)
# yarn test

### Linting
# (Example)
# yarn lint

## API Communication Flow
# (Optional: Proposed by @meta-architect if critical to the project)
# (Example: "1. User clicks 'Add to Cart'. 2. `cart.store.ts` is updated instantly. 3. `cart.sync.ts` calls Shopify API in the background...")

## Key Technical Details
# (Optional: Any other critical details agents must know)

## Architecture Compliance
# (Specific rules agents MUST follow for this stack)
# (Example)
# 1. "Isolate Business Logic: All cart state logic MUST reside in `src/lib/features/cart/`."
# 2. "Decouple API Logic: All Shopify API calls MUST be abstracted in `src/lib/services/shopify/`."

# 
# âšª =================================================================
# âšª GLOBAL RULES SECTION (The "Methodology")
# âšª =================================================================
# These rules are fixed for the "Universal Framework".
# They define HOW agents operate and collaborate.
#

## Sub-Agent Workflow & Rules
# (Rules for session and artifact management)
- After a plan mode phase you should create a `.claude/sessions/context_session_{feature_name}.md` with the definition of the plan.
- Before you do any work, MUST view files in `.claude/sessions/context_session_{feature_name}.md` file and `.claude/doc/{feature_name}/*` files to get the full context.
- `.claude/sessions/context_session_{feature_name}.md` should contain most of context of what we did, overall plan, and sub agents will continuously add context to the file.
- After you finish the work, MUST update the `.claude/sessions/context_session_{feature_name}.md` file to make sure others can get full context of what you did.
- After you finish each phase, MUST update the `.claude/sessions/context_session_{feature_name}.md` file.

## Code Writing Standards
# (Global standards for code quality)
- **Simplicity First**: Prefer simple, clean, maintainable solutions over clever ones.
- **ABOUTME Comments**: All code files MUST start with a brief 2-line comment explaining what the file does. Each line MUST start with "ABOUTME: ".
- **Minimal Changes**: Make the SMALLEST reasonable changes to achieve the desired outcome.
- **Style Matching**: MATCH the style and formatting of surrounding code.
- **Preserve Comments**: NEVER remove code comments unless provably false.
- **No Temporal Naming**: Avoid 'new', 'improved', 'enhanced' in names/comments.
- **Evergreen Documentation**: Comments describe code as it is, not its history.
- (Add other applicable rules here)

## Version Control Standards
# (Global standards for Git)
- Non-trivial edits MUST be tracked in git.
- If the project isn't in a git repo, YOU MUST STOP and ask permission to initialize one.
- If there are uncommitted changes... YOU MUST STOP and ask how to handle them.
- When starting work... YOU MUST create a WIP branch.
- YOU MUST commit frequently throughout the development process.
- Never throw away implementations without explicit permission.

## Testing Requirements
# (Global policy for testing)
- **NO EXCEPTIONS POLICY**: All projects MUST have unit tests, integration tests, AND end-to-end tests.
- The only way to skip any test type is if Daniel EXPLICITLY states: "I AUTHORIZE YOU TO SKIP WRITING TESTS THIS TIME."
- Tests MUST comprehensively cover ALL implemented functionality.
- Test output MUST BE PRISTINE TO PASS.
- YOU MUST NEVER ignore system or test output - logs contain critical information.

## Code Writing
# (Global rules for AI-Human communication)
- YOU MUST ALWAYS address me as "Daniel" in all communications.
- YOU MUST NOT change whitespace unrelated to code you're modifying.
- (Add other applicable rules from the original list here)

## Getting Help
# (Global rules for human escalation)
- Always ask for clarification rather than making assumptions.
- Stop and ask for help when stuck, especially when human input would be valuable.
- If considering an exception to any rule, stop and get explicit permission from Daniel first.

## Compliance Check
# (The final gate for all agent actions)
- Before submitting any work, verify that you have followed ALL guidelines above.
- If you find yourself considering an exception to ANY rule, YOU MUST STOP and get explicit permission from Daniel first.